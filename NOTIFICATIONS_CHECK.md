# üì¨ –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô - –ü–†–û–í–ï–†–ö–ê

–°–æ–∑–¥–∞–Ω–æ: 2026-01-15

---

## ‚úÖ –ß–¢–û –ü–†–û–í–ï–†–ï–ù–û

### Backend (Celery Tasks - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

#### 1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è ‚úÖ
- **Task:** `notify_event_invited_task`
- **–ö–æ–≥–¥–∞:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
- **–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç:** –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ (–∫—Ä–æ–º–µ —Å–æ–∑–¥–∞—Ç–µ–ª—è)
- **–§–∞–π–ª:** `backend/app/api/v1/events.py` —Å—Ç—Ä–æ–∫–∞ 886
- **–°–æ–æ–±—â–µ–Ω–∏–µ:** "–í–∞—Å –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –Ω–∞ –≤—Å—Ç—Ä–µ—á—É ¬´{–Ω–∞–∑–≤–∞–Ω–∏–µ}¬ª –æ—Ç {–∏–º—è}"

#### 2. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è ‚úÖ
- **Task:** `notify_event_updated_task`
- **–ö–æ–≥–¥–∞:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è (–≤–∫–ª—é—á–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏)
- **–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç:** –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ (–∫—Ä–æ–º–µ —Ç–æ–≥–æ –∫—Ç–æ –∏–∑–º–µ–Ω–∏–ª)
- **–§–∞–π–ª:** `backend/app/api/v1/events.py` —Å—Ç—Ä–æ–∫–∞ 1022
- **–°–æ–æ–±—â–µ–Ω–∏–µ:** "–í—Å—Ç—Ä–µ—á–∞ ¬´{–Ω–∞–∑–≤–∞–Ω–∏–µ}¬ª –±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ {–∏–º—è}"

#### 3. –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è ‚úÖ
- **Task:** `notify_event_cancelled_task`
- **–ö–æ–≥–¥–∞:** –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
- **–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç:** –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ (–∫—Ä–æ–º–µ —Ç–æ–≥–æ –∫—Ç–æ —É–¥–∞–ª–∏–ª)
- **–§–∞–π–ª:** `backend/app/api/v1/events.py` —Å—Ç—Ä–æ–∫–∏ 1204, 1221
- **–°–æ–æ–±—â–µ–Ω–∏–µ:** "–í—Å—Ç—Ä–µ—á–∞ ¬´{–Ω–∞–∑–≤–∞–Ω–∏–µ}¬ª –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞ {–∏–º—è}"

#### 4. –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ –Ω–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ ‚úÖ
- **Task:** `notify_participant_response_task`
- **–ö–æ–≥–¥–∞:** –ö–æ–≥–¥–∞ —É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- **–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç:** –í–ª–∞–¥–µ–ª–µ—Ü –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä)
- **–°–æ–æ–±—â–µ–Ω–∏–µ:** "{–∏–º—è} –ø—Ä–∏–Ω—è–ª/–æ—Ç–∫–ª–æ–Ω–∏–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –≤—Å—Ç—Ä–µ—á—É ¬´{–Ω–∞–∑–≤–∞–Ω–∏–µ}¬ª"

---

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å ‚úÖ

```python
@celery_app.task(bind=True, max_retries=3, default_retry_delay=60)
```

- **Max retries:** 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **Retry delay:** 60 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º traceback
- **–ò–∑–æ–ª—è—Ü–∏—è:** –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é —Å–µ—Å—Å–∏—é –ë–î
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Celery, –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç API

---

### Frontend ‚úÖ

#### Polling
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** 15 —Å–µ–∫—É–Ω–¥ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è 300 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- **–§–∞–π–ª:** `frontend/src/hooks/useNotifications.ts` —Å—Ç—Ä–æ–∫–∞ 52

#### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `NotificationCenter`
- **–ò–∫–æ–Ω–∫–∏:** üì® –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ, ‚úèÔ∏è –∏–∑–º–µ–Ω–µ–Ω–∏–µ, ‚ùå –æ—Ç–º–µ–Ω–∞, ‚è∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- **–¶–≤–µ—Ç–∞:** –°–∏–Ω–∏–π, –ñ–µ–ª—Ç—ã–π, –ö—Ä–∞—Å–Ω—ã–π, –ó–µ–ª—ë–Ω—ã–π

#### –ó–≤—É–∫ üîä
- **–§–∞–π–ª:** `frontend/public/sounds/notification.mp3`
- **–¢—Ä–∏–≥–≥–µ—Ä:** –ö–æ–≥–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
- **–ì—Ä–æ–º–∫–æ—Å—Ç—å:** 50%
- **Fallback:** Graceful degradation (–Ω–µ –ª–æ–º–∞–µ—Ç —Ä–∞–±–æ—Ç—É –µ—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç)

---

## üß™ –ö–ê–ö –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
```bash
1. –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ "event_invited"
3. –°–æ–∑–¥–∞—Ç–µ–ª—å –ù–ï –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–≤–æ—ë–º –∂–µ —Å–æ–±—ã—Ç–∏–∏
```

### –¢–µ—Å—Ç 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
```bash
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–±—ã—Ç–∏–µ
2. –ò–∑–º–µ–Ω–∏—Ç–µ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞/–æ–∫–æ–Ω—á–∞–Ω–∏—è
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ "event_updated"
```

### –¢–µ—Å—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
```bash
1. –£–¥–∞–ª–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ "event_cancelled"
```

### –¢–µ—Å—Ç 4: –ó–≤—É–∫
```bash
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ notification.mp3 –≤ frontend/public/sounds/
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–≥–æ-—Ç–æ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤–∞—Å –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
4. –ß–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥ –¥–æ–ª–∂–µ–Ω –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏—Å—å –∑–≤—É–∫
```

---

## üîç –õ–û–ì–ò (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### Backend
```bash
# –õ–æ–≥–∏ Celery worker
journalctl -u planner-celery-worker -f

# –õ–æ–≥–∏ –∑–∞–¥–∞—á —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
grep "notify_event" /var/log/planner/backend-error.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Celery
systemctl status planner-celery-worker
```

### Frontend
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('Notifications loaded:', notifications);
console.log('Unread count:', unreadCount);
```

---

## üìä –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

```
1. API Endpoint (—Å–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è)
   ‚Üì
2. Celery Task –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
   ‚Üì
3. Celery Worker –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É
   ‚Üì
4. Notification —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –ë–î
   ‚Üì
5. Frontend polling (–∫–∞–∂–¥—ã–µ 15 —Å–µ–∫) –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   ‚Üì
6. –ï—Å–ª–∏ –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚Üí –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∑–≤—É–∫
   ‚Üì
7. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ NotificationCenter
```

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### Celery Worker
- **–§–∞–π–ª:** `backend/app/celery_app.py`
- **–ó–∞–ø—É—Å–∫:** `systemctl start planner-celery-worker`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `systemctl status planner-celery-worker`

### Redis (–æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á)
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `redis://localhost:6379/0`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `redis-cli ping` (–¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å PONG)

---

## üéØ –ò–¢–û–ì

‚úÖ **–í—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç**
‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Celery**
‚úÖ **Retry –ª–æ–≥–∏–∫–∞ –Ω–∞ —Å–ª—É—á–∞–π –æ—à–∏–±–æ–∫**
‚úÖ **Polling –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥**
‚úÖ **–ó–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω)**
‚úÖ **Graceful degradation (–Ω–µ –ª–æ–º–∞–µ—Ç—Å—è –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)**

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω! üöÄ**

