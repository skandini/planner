# Инструкция по пересборке бэкенда

## Полная пересборка бэкенда

### 1. Остановите текущий сервер
Нажмите `Ctrl+C` в терминале, где запущен бэкенд

### 2. Активируйте виртуальное окружение
```powershell
cd backend
.\.venv\Scripts\Activate.ps1
```

### 3. Обновите зависимости (если нужно)
```powershell
pip install -r requirements.txt --upgrade
```

### 4. Примените миграции базы данных
```powershell
alembic upgrade head
```

### 5. Создайте личные календари для существующих пользователей (если нужно)
```powershell
python scripts/create_personal_calendars.py
```

### 6. Запустите сервер
```powershell
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## Проверка работоспособности

1. Откройте в браузере: `http://localhost:8000/api/v1/health`
   - Должен вернуться: `{"status":"ok"}`

2. Откройте документацию API: `http://localhost:8000/docs`
   - Должна открыться Swagger UI

3. Проверьте endpoint доступности:
   - `GET /api/v1/calendars/{calendar_id}/members/{user_id}/availability?from=...&to=...`
   - Должен работать без проверки доступа к календарю

## Важные изменения

- ✅ Убраны все проверки доступа к календарю при приглашении участников
- ✅ Endpoint доступности работает для любого пользователя
- ✅ Можно приглашать любых участников на события без ограничений
- ✅ Занятость проверяется по всем событиям пользователя (личные календари + участие)

