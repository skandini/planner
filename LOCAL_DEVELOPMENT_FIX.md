# Исправление проблем локальной разработки

## Проблемы:

1. **Redis не запущен**: `Error 10061 connecting to localhost:6379`
2. **SQLite database locked**: `(sqlite3.OperationalError) database is locked`

## Решения:

### 1. Redis ошибка (ИСПРАВЛЕНО в коде)

Код теперь автоматически использует память вместо Redis, если Redis недоступен. Это работает для локальной разработки.

**Опционально:** Если хотите использовать Redis локально:
- Windows: Установите Redis через WSL или используйте Docker
- Или просто работайте без Redis (код теперь поддерживает это)

### 2. SQLite database locked (ИСПРАВЛЕНО в коде + нужно сделать)

**Что было исправлено в коде:**
- Добавлен timeout для SQLite (20 секунд)
- Включен WAL mode для лучшей параллельной работы

**Что нужно сделать:**

1. **Остановите все процессы backend:**
   ```powershell
   # Найти процессы Python/uvicorn
   Get-Process | Where-Object {$_.ProcessName -like "*python*" -or $_.ProcessName -like "*uvicorn*"}
   
   # Остановить процессы (замените ID на реальные)
   Stop-Process -Id <process_id>
   ```

2. **Убедитесь, что запущен только один процесс backend:**
   - Закройте все терминалы, где запущен backend
   - Запустите backend только один раз:
     ```bash
     cd backend
     source .venv/bin/activate  # или .venv\Scripts\activate на Windows
     uvicorn app.main:app --reload
     ```

3. **Проверьте, что файл calendar.db не открыт:**
   - Закройте все программы, которые могут использовать базу данных
   - Убедитесь, что нет других процессов Python, которые используют базу

## После исправления:

1. Перезапустите backend (только один процесс)
2. Попробуйте снова сохранить событие и добавить комментарий
3. Ошибки должны исчезнуть

