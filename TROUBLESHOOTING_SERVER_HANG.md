# Решение проблемы: Сервер зависает (не отвечает на запросы)

## Проблема

Сервер запущен на порту 8000, но не отвечает на HTTP запросы (timeout).

## Причины

1. **Rate limiting блокирует запросы** - slowapi может зависнуть при неправильной конфигурации
2. **Проблема с middleware** - какой-то middleware блокирует обработку
3. **Проблема с БД** - долгие запросы к БД блокируют сервер
4. **Множественные соединения** - накопились "висячие" соединения

## Решение

### Шаг 1: Остановить зависший процесс

```powershell
# Найти процесс на порту 8000
netstat -ano | findstr :8000

# Остановить процесс (замените PID на реальный)
taskkill /F /PID 43848
taskkill /F /PID 32172
```

### Шаг 2: Проверить конфигурацию rate limiting

Возможная проблема: slowapi может зависнуть, если не настроен правильно.

**Временное решение:** Отключить rate limiting для проверки:

```python
# В backend/app/api/v1/auth.py временно закомментируйте декораторы:
# @limiter.limit("5/minute")
def register_user(...):
    ...

# @limiter.limit("10/minute")  
def login(...):
    ...
```

### Шаг 3: Перезапустить сервер

```powershell
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### Шаг 4: Проверить работу

```powershell
python backend/quick_check.py
```

## Альтернативное решение: Упростить rate limiting

Если проблема в slowapi, можно временно использовать более простой подход или отключить rate limiting для разработки.

## Проверка логов

При запуске сервера проверьте логи на наличие ошибок:

```
ERROR: ...
WARNING: ...
```

Особенно проверьте:
- Ошибки подключения к БД
- Ошибки в middleware
- Ошибки в rate limiting

## Быстрое исправление

Если нужно быстро запустить сервер без rate limiting:

1. Временно закомментируйте rate limiting в `backend/app/api/v1/auth.py`
2. Временно закомментируйте инициализацию limiter в `backend/app/main.py`:
   ```python
   # app.state.limiter = limiter
   ```
3. Перезапустите сервер


