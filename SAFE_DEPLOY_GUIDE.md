# üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–´–ô –î–ï–ü–õ–û–ô –ù–ê –ü–†–û–î–ê–ö–®–ù –°–ï–†–í–ï–†

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 14 —è–Ω–≤–∞—Ä—è 2026  
**–í–∞–∂–Ω–æ—Å—Ç—å:** –ö–†–ò–¢–ò–ß–ù–û - —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω!

---

## ‚úÖ –ß–¢–û –ó–ê–©–ò–©–ï–ù–û (–Ω–µ –ø–æ–ø–∞–¥–µ—Ç –≤ Git)

–ë–ª–∞–≥–æ–¥–∞—Ä—è `.gitignore` —ç—Ç–∏ —Ñ–∞–π–ª—ã **–ù–ò–ö–û–ì–î–ê** –Ω–µ –ø–æ–ø–∞–¥—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

### Backend
- ‚úÖ `backend/.env` - –≤–∞—à–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è SQLite –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `backend/calendar.db` - –ª–æ–∫–∞–ª—å–Ω–∞—è SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `backend/calendar.db-shm` - SQLite –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
- ‚úÖ `backend/calendar.db-wal` - SQLite –∂—É—Ä–Ω–∞–ª
- ‚úÖ `backend/uploads/*` - –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `backend/.venv/` - –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python

### Frontend
- ‚úÖ `frontend/.env.local` - –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ `frontend/node_modules/` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ `frontend/.next/` - —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –°–µ–∫—Ä–µ—Ç—ã
- ‚úÖ `CREDENTIALS.md` - –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `*.COMPLETE`, `*.FIXED`, `*.BACKUP` - —Ñ–∞–π–ª—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ `.cursor/` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AI —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞

**–í–ê–ñ–ù–û:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- Redis –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Production .env —Ñ–∞–π–ª—ã
- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìã –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –î–ï–ü–õ–û–Æ

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ (Windows)

#### 1.1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Git

```powershell
cd c:\testprj
git status
```

**–ß—Ç–æ –ù–ï –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:**
- ‚ùå `backend/.env`
- ‚ùå `backend/calendar.db`
- ‚ùå `backend/uploads/*`
- ‚ùå `CREDENTIALS.md`

#### 1.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

```powershell
git check-ignore backend/.env backend/calendar.db CREDENTIALS.md
```

–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Ç—Ä–∏ —Ñ–∞–π–ª–∞ = –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

#### 1.3. –î–æ–±–∞–≤—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git

```powershell
# –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã (–ë–ï–ó–û–ü–ê–°–ù–û)
git add .gitignore
git add frontend/src/components/events/EventModal.tsx
git add frontend/src/components/events/EventModalEnhanced.tsx
git add frontend/src/components/rooms/ResourcePanel.tsx
git add start-frontend.ps1

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
git add BACKEND_STRUCTURE.md MAINTENANCE.md PROJECT_INFO.md README_DOCS.md SAFE_DEPLOY_GUIDE.md

# –î–æ–±–∞–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
git add -u
```

**–ù–ò–ö–û–ì–î–ê –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï:**
```powershell
# ‚ùå –û–ü–ê–°–ù–û - –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å .env –∏ –¥—Ä—É–≥–∏–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
git add .
git add *
git add --all
```

#### 1.4. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–º–∏—Ç

```powershell
git commit -m "feat: —É–ª—É—á—à–µ–Ω–∏—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- –û–±–Ω–æ–≤–ª–µ–Ω EventModal —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- –£–ª—É—á—à–µ–Ω EventModalEnhanced
- –û–±–Ω–æ–≤–ª–µ–Ω ResourcePanel
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- –£–ª—É—á—à–µ–Ω .gitignore –¥–ª—è –∑–∞—â–∏—Ç—ã –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"
```

#### 1.5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ GitHub

```powershell
git push origin refactor/split-page-tsx
```

---

### –≠—Ç–∞–ø 2: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Ubuntu)

#### 2.1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –° –≤–∞—à–µ–≥–æ Windows –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
ssh root@155.212.190.153
# –∏–ª–∏
ssh root@calendar.corestone.ru
```

#### 2.2. –°–û–ó–î–ê–ô–¢–ï –ë–≠–ö–ê–ü (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

```bash
# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
cd /root/backups
PGPASSWORD='YtragtR65A' pg_dump -U planner_user -d planner_db | gzip > backup_before_deploy_$(date +%Y%m%d_%H%M%S).sql.gz

# –ë—ç–∫–∞–ø –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
tar -czf uploads_backup_$(date +%Y%m%d_%H%M%S).tar.gz /opt/planner/backend/uploads/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±—ç–∫–∞–ø—ã —Å–æ–∑–¥–∞–Ω—ã
ls -lh /root/backups/
```

#### 2.3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–µ–∫—É—â–∏–µ .env —Ñ–∞–π–ª—ã (–ö–†–ò–¢–ò–ß–ù–û!)

```bash
cd /opt/planner

# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–ø–∏–∏ .env —Ñ–∞–π–ª–æ–≤
cp backend/.env backend/.env.backup
cp frontend/.env.local frontend/.env.local.backup

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
ls -la backend/.env*
ls -la frontend/.env*
```

#### 2.4. –ü–æ–ª—É—á–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Git

```bash
cd /opt/planner

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É
git branch

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Å—Ç–æ)
git status

# –ï—Å–ª–∏ –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö
git stash

# –ü–æ–ª—É—á–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin refactor/split-page-tsx
```

#### 2.5. –ü–†–û–í–ï–†–¨–¢–ï —á—Ç–æ .env —Ñ–∞–π–ª—ã –ù–ï –∏–∑–º–µ–Ω–∏–ª–∏—Å—å (–ö–†–ò–¢–ò–ß–ù–û!)

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ .env –æ—Å—Ç–∞–ª—Å—è —Å PostgreSQL
nano backend/.env
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: DATABASE_URL=postgresql://planner_user:YtragtR65A@localhost:5432/planner_db

# –ï—Å–ª–∏ .env –∏–∑–º–µ–Ω–∏–ª—Å—è –∏–ª–∏ –ø—Ä–æ–ø–∞–ª (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞)
cp backend/.env.backup backend/.env
cp frontend/.env.local.backup frontend/.env.local
```

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π backend/.env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:**

```env
# Database (–ü–†–û–î–ê–ö–®–ù - PostgreSQL!)
DATABASE_URL=postgresql://planner_user:YtragtR65A@localhost:5432/planner_db

# Redis
REDIS_URL=redis://localhost:6379/0

# Celery
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Security
SECRET_KEY=5J9MtncMfISUEwrS9TJ5WU5Wz-m5thuxmOKEhbQZq5_hkDpd7gGUlLwwAu-RfhDJWQjSZ09A7pdlu279wF9Y1w
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Environment
ENVIRONMENT=production

# CORS
BACKEND_CORS_ORIGINS=https://calendar.corestone.ru,http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000,http://127.0.0.1:3001
```

#### 2.6. –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Backend

```bash
cd /opt/planner/backend

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source .venv/bin/activate

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)
alembic upgrade head
```

#### 2.7. –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Frontend

```bash
cd /opt/planner/frontend

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–±–µ—Ä–∏—Ç–µ production –≤–µ—Ä—Å–∏—é
npm run build
```

#### 2.8. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
systemctl restart planner-backend

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Celery
systemctl restart planner-celery-worker
systemctl restart planner-celery-beat

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ frontend
systemctl restart planner-frontend

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx
systemctl reload nginx
```

#### 2.9. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
systemctl status planner-backend planner-celery-worker planner-frontend redis-server postgresql nginx

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
/usr/local/bin/planner-status.sh
```

#### 2.10. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

```bash
# Backend –ª–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫)
tail -50 /var/log/planner/backend-error.log

# –ò–ª–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u planner-backend -f

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
tail -50 /var/log/planner/backend-error.log | grep ERROR
```

---

### –≠—Ç–∞–ø 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

#### 3.1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
curl http://localhost:8000/api/v1/health

# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
curl https://calendar.corestone.ru/api/v1/health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "status": "healthy",
  "database": "connected",
  "redis": "connected"
}
```

#### 3.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Frontend

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:
- https://calendar.corestone.ru

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ú–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- ‚úÖ –°–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

#### 3.3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
PGPASSWORD='YtragtR65A' psql -U planner_user -d planner_db -c "SELECT COUNT(*) FROM users;"
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–µ 0).

#### 3.4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis –∏ Celery

```bash
# Redis
redis-cli ping

# Celery
systemctl status planner-celery-worker
tail -20 /var/log/planner/celery-worker.log
```

---

## üö® –ß–¢–û –î–ï–õ–ê–¢–¨ –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°–∞–π—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (502/504 –æ—à–∏–±–∫–∞)

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl status planner-backend planner-frontend

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -50 /var/log/planner/backend-error.log
tail -50 /var/log/nginx/planner-error.log

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ
systemctl restart planner-backend planner-frontend nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PostgreSQL
systemctl status postgresql

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
PGPASSWORD='YtragtR65A' psql -U planner_user -d planner_db -c "SELECT 1;"

# 3. –ï—Å–ª–∏ –±–∞–∑–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞
cd /root/backups
gunzip -c backup_before_deploy_*.sql.gz | PGPASSWORD='YtragtR65A' psql -U planner_user -d planner_db
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Celery –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis
redis-cli ping

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Celery
systemctl status planner-celery-worker

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
systemctl restart redis-server
systemctl restart planner-celery-worker
systemctl restart planner-celery-beat
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: .env —Ñ–∞–π–ª —Å–ª—É—á–∞–π–Ω–æ –∏–∑–º–µ–Ω–∏–ª—Å—è

```bash
# –ù–ï–ú–ï–î–õ–ï–ù–ù–û –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞!
cd /opt/planner
cp backend/.env.backup backend/.env
cp frontend/.env.local.backup frontend/.env.local

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
systemctl restart planner-backend planner-frontend
```

### –ö–†–ê–ô–ù–Ø–Ø –ú–ï–†–ê: –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

```bash
cd /opt/planner

# 1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git log --oneline -10

# 2. –û—Ç–∫–∞—Ç–∏—Ç–µ—Å—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç
git reset --hard <–ø—Ä–µ–¥—ã–¥—É—â–∏–π_–∫–æ–º–º–∏—Ç_hash>

# 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ frontend
cd frontend
npm run build

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ
systemctl restart planner-backend planner-celery-worker planner-frontend

# 5. –ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
cd /root/backups
gunzip -c backup_before_deploy_*.sql.gz | PGPASSWORD='YtragtR65A' psql -U planner_user -d planner_db
```

---

## üìù –ß–ï–ö–õ–ò–°–¢ –ë–ï–ó–û–ü–ê–°–ù–û–ì–û –î–ï–ü–õ–û–Ø

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º (–ª–æ–∫–∞–ª—å–Ω–æ):
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª `git status` - –Ω–µ—Ç `.env`, `.db`, `uploads/`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª `git check-ignore backend/.env` - –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –î–æ–±–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã (`git add <–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ_—Ñ–∞–π–ª—ã>`)
- [ ] –°–æ–∑–¥–∞–ª –∫–æ–º–º–∏—Ç —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- [ ] –û—Ç–ø—Ä–∞–≤–∏–ª –Ω–∞ GitHub (`git push`)

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- [ ] –°–æ–∑–¥–∞–ª –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞–ª –±—ç–∫–∞–ø .env —Ñ–∞–π–ª–æ–≤
- [ ] –í—ã–ø–æ–ª–Ω–∏–ª `git pull`
- [ ] –ü–†–û–í–ï–†–ò–õ —á—Ç–æ .env –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è (PostgreSQL, Redis)
- [ ] –û–±–Ω–æ–≤–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ backend
- [ ] –û–±–Ω–æ–≤–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ frontend –∏ —Å–æ–±—Ä–∞–ª (`npm run build`)
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª API health endpoint
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- [ ] –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏
- [ ] –°–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç (Celery —Ä–∞–±–æ—Ç–∞–µ—Ç)
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

---

## üí° –ó–û–õ–û–¢–´–ï –ü–†–ê–í–ò–õ–ê

1. **–í–°–ï–ì–î–ê** –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git add .` –∏–ª–∏ `git add *`
3. **–í–°–ï–ì–î–ê** –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ .env —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ `git pull`
4. **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ CREDENTIALS.md
5. **–í–°–ï–ì–î–ê** —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
6. **–ü–û–ú–ù–ò–¢–ï:** –õ–æ–∫–∞–ª—å–Ω–æ SQLite, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ PostgreSQL - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!
7. **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï** –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è (—Å–æ–∑–¥–∞–¥–∏–º –Ω–∏–∂–µ)

---

## üîß –ê–í–¢–û–ú–ê–¢–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –°–ö–†–ò–ü–¢ –î–ï–ü–õ–û–Ø

–°–æ–∑–¥–∞–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:

```bash
nano /usr/local/bin/safe-deploy-planner.sh
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞ - —Å–º. —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
1. –ù–ï –ü–ê–ù–ò–ö–£–ô–¢–ï - —É –≤–∞—Å –µ—Å—Ç—å –±—ç–∫–∞–ø—ã!
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –∫–æ–º–∞–Ω–¥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

**–í–ê–ñ–ù–û:** –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞.  
–°–ª–µ–¥—É–π—Ç–µ –µ–π —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –∏ –≤—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å! üöÄ

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 14 —è–Ω–≤–∞—Ä—è 2026


